(()=>{var t,e={575:t=>{t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},913:t=>{function e(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}},713:t=>{t.exports=function(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}},270:(t,e,i)=>{!function(t){var e=t(".nav-modal"),i=t(".nav__items"),n=t(".nav__burger"),s=t(".nav__burger-line");function r(){e.toggleClass("nav-modal--active"),i.toggleClass("nav__items--active"),s.each((function(){t(this).toggleClass("nav__burger-line--active")}))}n.on("click",r),e.on("click",r),t(".nav__item--list").each((function(e,i){var n=t(i),s=n.find(".nav__list");n.on("click",(function(t){s.toggleClass("nav__list--open")})),t(document).on("click",(function(t){t.target instanceof HTMLElement&&(n.has(t.target).length>0||s.hasClass("nav__list--open")&&s.removeClass("nav__list--open"))}))}))}(i(755))},700:(t,e,i)=>{"use strict";var n=i(575),s=i.n(n),r=i(713),o=i.n(r),u=function t(e,i,n){var r=this;s()(this,t),this.model=e,this.view=i,o()(this,"updateModel",(function(t){t.type,"item"===t.type&&(r.view.doughnut.addItem(t.index,t.value,t.title,t.color,r.model.sum),r.view.list.addItem(t.title,t.color),r.view.number.title=r.model.title,r.view.number.number=String(r.model.sum))})),o()(this,"updateView",(function(t){"view"===t.type&&r.view.draw()})),this.model.sub(this),this.view.sub(this),this.model.setTotalName(["голос","голоса","голосов"]),n.forEach((function(t){r.model.addItem(t)}))},h=i(913),a=i.n(h),l=function(){function t(){var e=this;s()(this,t),o()(this,"_totalName",["","",""]),o()(this,"_items",[]),o()(this,"observers",[]),o()(this,"update",(function(t){e.observers.forEach((function(e){return e.updateModel(t)}))}))}return a()(t,[{key:"addItem",value:function(t){var e=this._items.length,i=new c(t.value,t.color,t.title,e);this._items.push(i),this.updateItem(e)}},{key:"setTotalName",value:function(t){this._totalName=t,this.update({type:"title",title:this.title})}},{key:"getWordForm",value:function(t,e){return e[t%100>4&&t%100<20?2:[2,0,1,1,1,2][t%10<5?t%10:5]]}},{key:"updateItem",value:function(t){if(void 0===this._items[t])throw new Error("Model update error: wrong index, item doesn't exist");var e=this._items[t],i=e.color,n=e.title,s=e.value;this.update({type:"item",index:t,color:i,title:n,value:s})}},{key:"sub",value:function(t){this.observers.push(t)}},{key:"unsub",value:function(t){this.observers.filter((function(e){return t!==e}))}},{key:"sum",get:function(){var t=this._items.map((function(t){return t.value}));return t.length>0?t.reduce((function(t,e){return t+e})):0}},{key:"title",get:function(){return this.getWordForm(this.sum,this._totalName)}}]),t}(),c=function(){function t(e,i,n,r){s()(this,t),this._value=e,this._color=i,this._title=n,this._index=r}return a()(t,[{key:"value",get:function(){return this._value}},{key:"color",get:function(){return this._color}},{key:"title",get:function(){return this._title}}]),t}(),d=i(755),v=function(){function t(){var e=this;s()(this,t),o()(this,"$body",void 0),o()(this,"canvas",void 0),o()(this,"ctx",void 0),o()(this,"doughnut",void 0),o()(this,"number",void 0),o()(this,"list",void 0),o()(this,"observers",[]),o()(this,"update",(function(t){e.observers.forEach((function(e){return e.updateView(t)}))})),this.$body=d('<div class="doughnut"></div>'),this.canvas=document.createElement("canvas"),this.canvas.width=120,this.canvas.height=120,this.ctx=this.canvas.getContext("2d"),this.doughnut=new f(this.ctx,this.update,this.canvas.width/2),this.number=new m(this.ctx,this.update),this.list=new y,this.$body.append(this.canvas,this.list.render)}return a()(t,[{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.doughnut.draw(),this.number.draw()}},{key:"sub",value:function(t){this.observers.push(t)}},{key:"unsub",value:function(t){this.observers.filter((function(e){return t!==e}))}},{key:"render",get:function(){return this.$body}}]),t}(),f=function(){function t(e,i,n){s()(this,t),this.ctx=e,this.update=i,this.radius=n,o()(this,"items",[]),o()(this,"min",.03)}return a()(t,[{key:"setItems",value:function(t){var e=this,i=[0],n=this.items.map((function(e,i){return e.value/t}));n.forEach((function(t,s){0===t||t>e.min||(i.push(e.min-t),n[s]=e.min)}));var s=i.reduce((function(t,e){return t+e/(n.length-(i.length-1))}));n.forEach((function(t,i){var n=t>e.min?t-s:t;e.setItem(i,n)}))}},{key:"addItem",value:function(t,e,i,n,s){var r=new _(this.ctx,e,i);r.radius=this.radius,r.color=n,this.items[t]=r,this.setItems(s),this.update({type:"view"})}},{key:"setItem",value:function(t,e){var i=this.items[t];if(0!==e){var n=this.radius-5,s=this.toRadian(1),r=2*e*Math.PI-s,o=void 0===this.items[t-1]?this.toRadian(90):this.items[t-1].endAngle+s,u=o,h=r+o,a=this.radius,l=this.radius;i.setBody(a,l,n,u,h,4)}}},{key:"toRadian",value:function(t){return Math.PI/180*t}},{key:"draw",value:function(){this.items.forEach((function(t){t.draw()}))}}]),t}(),_=function(){function t(e,i,n){s()(this,t),this.ctx=e,this._value=i,this._title=n,o()(this,"_x",0),o()(this,"_y",0),o()(this,"_radius",0),o()(this,"_startAngle",0),o()(this,"_endAngle",0),o()(this,"_color",""),o()(this,"_width",0)}return a()(t,[{key:"setBody",value:function(t,e,i,n,s,r){this._x=t,this._y=e,this._radius=i,this._startAngle=n,this._endAngle=s,this._width=r}},{key:"draw",value:function(){this.ctx.beginPath(),this.ctx.arc(this._x,this._y,this._radius,this._startAngle,this._endAngle),this.ctx.strokeStyle=this._color,this.ctx.lineWidth=this._width,this.ctx.stroke()}},{key:"value",get:function(){return this._value}},{key:"endAngle",get:function(){return this._endAngle}},{key:"radius",set:function(t){this._radius=t}},{key:"color",set:function(t){if(Array.isArray(t)){var e=this.ctx.createLinearGradient(this._radius,0,this._radius,2*this._radius);return t.forEach((function(t,i){return e.addColorStop(i/(t.length-1),t)})),void(this._color=e)}this._color=t}}]),t}(),m=function(){function t(e,i){s()(this,t),this.ctx=e,this.update=i,o()(this,"_number","260"),o()(this,"_title","ГОЛОСОВ"),o()(this,"_numberFont","700 24px Montserrat"),o()(this,"_titleFont","700 12px Montserrat"),o()(this,"_color","#BC9CFF"),o()(this,"_x",60),o()(this,"_y",40)}return a()(t,[{key:"draw",value:function(){this.ctx.font=this._numberFont,this.ctx.fillStyle=this._color,this.ctx.textBaseline="top";var t=this.ctx.measureText(this._number).width;this.ctx.fillText(this._number,this._x-t/2,this._y),this.ctx.font=this._titleFont;var e=this.ctx.measureText(this._title).width;this.ctx.fillText(this._title,this._x-e/2,this._y+30,120)}},{key:"number",set:function(t){this._number=t,this.update({type:"view"})}},{key:"title",set:function(t){this._title=t.toUpperCase(),this.update({type:"view"})}}]),t}(),y=function(){function t(){s()(this,t),o()(this,"$body",void 0),o()(this,"_items",[]),this.$body=d('<ul class="doughnut__list"></ul>')}return a()(t,[{key:"addItem",value:function(t,e){this._items.push(new p(t,e)),this.$body.append(this._items.map((function(t){return t.render})))}},{key:"render",get:function(){return this.$body}}]),t}(),p=function(){function t(e,i){s()(this,t),this._title=e,this._color=i,o()(this,"$body",void 0),o()(this,"$color",void 0),this.$body=d('<li class="doughnut__item"></li>'),this.$body.text(this._title),this.$color=d('<div class="doughnut__color"></div>'),this.$color.css("background","string"==typeof this._color?this._color:"linear-gradient(".concat(this._color.join(),")")),this.$body.prepend(this.$color)}return a()(t,[{key:"render",get:function(){return this.$body}}]),t}();!function(t){t.fn.doughnut=function(t){var e=new v,i=new l;new u(i,e,t);return this.append(e.render),this}}(i(755));i(270);!function(t,e,i){t((function(){t(".details__doughnut").doughnut([{value:130,color:["#FFBA9C","#FFE39C"],title:"Великолепно"},{value:65,color:["#66D2EA","#6FCF97"],title:"Хорошо"},{value:65,color:["#8BA4F9","#BC9CFF"],title:"Удовлетворительно"},{value:0,color:["#3D4975","#909090"],title:"Разочарован"}])}))}(i(755),window,document)}},i={};function n(t){var s=i[t];if(void 0!==s)return s.exports;var r=i[t]={exports:{}};return e[t].call(r.exports,r,r.exports,n),r.exports}n.m=e,t=[],n.O=(e,i,s,r)=>{if(!i){var o=1/0;for(a=0;a<t.length;a++){for(var[i,s,r]=t[a],u=!0,h=0;h<i.length;h++)(!1&r||o>=r)&&Object.keys(n.O).every((t=>n.O[t](i[h])))?i.splice(h--,1):(u=!1,r<o&&(o=r));u&&(t.splice(a--,1),e=s())}return e}r=r||0;for(var a=t.length;a>0&&t[a-1][2]>r;a--)t[a]=t[a-1];t[a]=[i,s,r]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={767:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var s,r,[o,u,h]=i,a=0;for(s in u)n.o(u,s)&&(n.m[s]=u[s]);if(h)var l=h(n);for(e&&e(i);a<o.length;a++)r=o[a],n.o(t,r)&&t[r]&&t[r][0](),t[o[a]]=0;return n.O(l)},i=self.webpackChunktoxin=self.webpackChunktoxin||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n.O(void 0,[755],(()=>n(700)));s=n.O(s)})();